* 编辑流程属性设计
#+begin_src ditaa




  +---------------+     load(1)                     +------------------------------+                        +---------------------+
  |               |          |                      |                              |                        |                     |
  |   left-bar    |          |                      |       xml-render             |                        |     property-edit   |
  |               |          |                      |                              |                        |                     |
  |               |          |                      |                              |                        |                     |
  |               |          |                      |                              |                        |                     |
  |               |          |                      |                              |                        |                     |
  |  +---------+  |          |                      |                              |                        |                     |
  |  |  xiebo  |  |<---------+                      |       +----------+           |                        |                     |
  |  |         |  |        click to add shape(2)    |       |     xiebo|           |  click to edit props(3)|                     |
  |  |         +--+------------------------------>  |       |          |-----------+--------------------->  |                     |
  |  |         |  |                                 |       |          |           |                        |                     |
  |  +---+-----+  |                                 |       |          |           |                        |                     |
  |               |                                 |       +----------+           |                        |                     |
  |               |                                 |             ↑                |                        |                     |
  |               |                                 |             |                |                        |                     |
  |               |                                 |             |                |                        |                     |
  |               |                                 |             |                |                        |                     |
  |               |                                 |             |                |                        |                     |
  |               |                                 |             |                |                        |                     |
  |               |                                 |             |                |                        |                     |
  |               |                                 |             |                |                        |                     |
  |               |                                 |             |                |                        |                     |
  +------+--------+                                 +-------------+----------------+                        +-----------+---------+
                                                                  ↑                                                    |
                                                                  |                                                    |
                                                                  |save to xml(5)                                      |
                                                                  |                                                    |
                                                                  |                                                    |
                                                                  |                                                    |
                                                                  |               save(4)                              |
                                                                 -+----------------------------------------------------+



#+end_src

** (1) 加载数据
*** 接受新palett格式的数据, 约定RcProperties内为可编辑参数 [{key: "label名称斜波", value: '斜波描述内容'}]
*** 调用init内的函数load到left-bar
** (2) 点击加载斜波task
*** 通过监听`shape.added`的方式, 监听加载斜波
*** 监听事件内通过`model.updatePropertites`将RcProperties更新到xml内
** (3) click聚焦xml-render面板内的斜波Task
*** 如果有如果有RcProperties, 就在property-edit内渲染显示可编辑的参数
*** 设置当前聚焦的task.element为当前编辑element(改变焦点或聚焦其他element时触发(4)update使用)
** (4) 当前聚焦的斜波Task blur
*** 判断新click的element的ID===当前element.id
** (5) 编辑完的数据save
*** 更新xml内的(3)聚焦的task.element的xml(再次通过`model.updatePropertites`)

* 数据传递设计
#+begin_src ditaa



  +-------------------+                          +-----------------------+                        +----------------------+
  |      c#           |                          |        web            |                        |        clojure       |
  |                   |                          |                       |                        |                      |
  |                   |     params(1)            |    +-------------+    |                        |                      |
  |                   +--------------------------+--->+  c# params  |    |                        |                      |
  |                   |                          |    |  to render  |    |                        |                      |
  |                   |                          |    |    json     |    |                        |                      |
  |                   |                          |    |             |    |                        |                      |
  |                   |                          |    |             |    |                        |                      |
  |                   |                          |    +------+------+    |                        |                      |
  |                   |                          |           |           |                        |                      |
  |                   |                          |           |           |                        |                      |
  |                   |                          |           ↓           |                        |                      |
  |                   |                          |    +-------------+    |                        |                      |
  |                   |                          |    |    edit     |    |                        |                      |
  |                   |                          |    |             |    |                        |                      |
  |                   |                          |    |             |    |                        |                      |
  |                   |                          |    +------+------+    |                        |                      |
  |                   |                          |           |           |                        |                      |
  |                   |                          |           |           |                        |                      |
  |                   |                          |           |           |                        |                      |
  |                   |                          |           ↓           |                        |                      |
  |                   |                          |    +-------------+    |                        |                      |
  |                   |                          |    |   xml       |    |     params(2)          |                      |
  |                   |                          |    |             +----+----------------------->+                      |
  |                   |                          |    | flow + data |    |                        |                      |
  |                   |                          |    +-------------+    |                        |                      |
  |                   |                          |                       |                        |                      |
  |                   |                          |                       |                        |                      |
  |                   |                          |                       |                        |                      |
  +-------------------+                          +-----------------------+                        +----------------------+


#+end_src

** (1) c# -> web 参数
待定, <2022-12-14 Wed> 参考:
#+begin_src js
  {
    //设计思路，这里的 variableId  可以从其他json文件中读取，每一个变量的数据结构和输入变量一样。schedule、channel、other是一个大的分类
     "id": "uuid",
    "title": "斜波",
    "titleShow": "静态试验斜波",
    "desc": "控件描述",
    //控制命令库的ID
    "groupId": 12,
    //排序
    "sort": 100,
    "isEnable": false,
    "schedule": [
      {
        //变量ID
        "variableId": 1234,
        //权限，1.普通可见可改变录入方式，2，普通可见不可改变录入方式，3.专业可见可改变录入方式，4.专业可见不可改变录入方式
        "permission": 1,
        "sort": 12
      },
      {
        //变量ID
        "variableId": "变量名称",
        //权限，1.普通可见可改变录入方式，2，普通可见不可改变录入方式，3.专业可见可改变录入方式，4.专业可见不可改变录入方式
        "permission": 3,
        "sort": 12
      }
    ],
    "channel": [
      {
        //变量ID
        "variableId": "通道选择_ID",
        //权限，1.普通可见可改变录入方式，2，普通可见不可改变录入方式，3.专业可见可改变录入方式，4.专业可见不可改变录入方式
        "permission": 1,
        //排序
        "sort": 13
      },
      {
        //变量ID
        "variableId": "绝对端值_ID",
        //权限，1.普通可见可改变录入方式，2，普通可见不可改变录入方式，3.专业可见可改变录入方式，4.专业可见不可改变录入方式
        "permission": 1,
        //排序
        "sort": 12
      }
    ],
    "other": [
      {
        //变量ID
        "variableId": "通道选择_ID",
        //权限，1.普通可见可改变录入方式，2，普通可见不可改变录入方式，3.专业可见可改变录入方式，4.专业可见不可改变录入方式
        "permission": 1,
        //排序
        "sort": 13
      },
      {
        //变量ID
        "variableId": "绝对端值_ID",
        //权限，1.普通可见可改变录入方式，2，普通可见不可改变录入方式，3.专业可见可改变录入方式，4.专业可见不可改变录入方式
        "permission": 1,
        //排序
        "sort": 12
      }
    ]
  }
#+end_src

** 
